<!-- Top Navigation Bar (Components/Sidebar converted to TopNav) -->
<header class="top-nav">
    <div class="nav-left">
        <!-- Main Navigation Pills -->
        <nav class="nav-pills">
            <a href="{{ url_for('dashboard_analytics') }}"
                class="nav-item {{ 'active' if request.endpoint == 'dashboard_analytics' else '' }}">
                Dashboard
            </a>
            <a href="{{ url_for('transactions_page') }}"
                class="nav-item {{ 'active' if request.endpoint == 'transactions_page' else '' }}">
                Transactions
            </a>
            <a href="{{ url_for('receipts_page') }}"
                class="nav-item {{ 'active' if request.endpoint == 'receipts_page' else '' }}">
                Receipts
            </a>
            <a href="{{ url_for('wishlist_page') }}"
                class="nav-item {{ 'active' if request.endpoint == 'wishlist_page' else '' }}">
                Wish list
            </a>
        </nav>
    </div>

    <div class="nav-right" style="display: flex; gap: 12px; align-items: center;">
        <a href="{{ url_for('sync_gmail') }}" class="btn-secondary btn-pill" title="Sync Gmail">
            ðŸ”„ Sync
        </a>

        <!-- Profile Button -->
        <div class="profile-wrapper" style="position: relative;">
            <button onclick="toggleProfileDropdown()" class="profile-btn">
                Profile
            </button>

            <!-- Dropdown -->
            <div id="profileDropdown" class="profile-dropdown"
                style="display: none; position: absolute; top: 120%; right: 0; background: #fff; border-radius: 12px; min-width: 200px; box-shadow: 0 4px 20px rgba(0,0,0,0.2); z-index: 100; padding: 8px;">
                <div style="padding: 12px; border-bottom: 1px solid #eee;">
                    <div style="font-weight: 600; color: #333; font-size: 14px;">{{ session.get('user_name', 'User') }}
                    </div>
                    <div style="color: #666; font-size: 12px;">{{ session.get('user_email', '') }}</div>
                </div>
                <a href="{{ url_for('logout') }}"
                    style="display: block; padding: 10px 12px; color: #dc2626; text-decoration: none; font-size: 13px; font-weight: 500;">
                    Log Out
                </a>
            </div>
        </div>
    </div>
</header>

<script>
    function toggleProfileDropdown() {
        const d = document.getElementById('profileDropdown');
        d.style.display = d.style.display === 'none' ? 'block' : 'none';
    }

    // Close on outside click
    document.addEventListener('click', function (e) {
        if (!e.target.closest('.profile-wrapper')) {
            document.getElementById('profileDropdown').style.display = 'none';
        }
    });
</script>